# Grimoire - 純粋記号プログラミング言語

> 「すべてのプログラムは魔法陣である」

Grimoireは、文字を一切使わず、純粋に記号と図形のみでプログラムを表現する実験的なビジュアルプログラミング言語です。手描きの魔法陣を画像認識によってコンパイルし、実行可能なプログラムを作成します。

![Build Status](https://github.com/ayutaz/Grimoire/actions/workflows/build-binaries.yml/badge.svg)
![Test Status](https://github.com/ayutaz/Grimoire/actions/workflows/test.yml/badge.svg)
![Coverage](https://img.shields.io/badge/coverage-82.88%25-brightgreen)

## 🌟 特徴

- **魔法陣パラダイム**: すべてのプログラムは外周円を持つ魔法陣として表現
- **完全記号化**: 文字を使わない純粋なビジュアル表現
- **画像認識**: 手描きまたはデジタル画像を実行可能プログラムにコンパイル
- **直感的な記号体系**: 図形とパターンで全てを表現
- **空間的プログラミング**: 図形の配置と接続でフローを制御

## 📐 基本記号

### 構造要素
- `◎` - メインエントリポイント
- `○` - 関数/スコープ
- `□` - 変数/データ
- `△` - 条件分岐
- `⬟` - ループ
- `⬢` - 並列処理
- `☆` - 出力/表示

### データ型（図形内パターン）
- `•` - 整数型
- `••` - 浮動小数点型
- `≡` - 文字列型
- `◐` - ブール型
- `※` - 配列型
- `⊞` - マップ型

### 数値表現
- `•` = 1, `••` = 2, `•••` = 3
- `⦿` = 10, `⊡` = 100, `⊙` = 1000

### 演算記号（魔法陣的表現）
- `⟐` - 結合/加算（エネルギーの収束）
- `⟑` - 分離/減算（エネルギーの分岐）
- `✦` - 増幅/乗算（4点星による力の増幅）
- `⟠` - 分割/除算（8分割円による分配）

## 📚 ドキュメント

- [言語仕様](docs/language-spec-ja.md)
- [コンパイラアーキテクチャ](docs/compiler-spec-ja.md)
- [チュートリアル](docs/tutorial-ja.md)
- [実装ガイド](docs/implementation-guide-ja.md)
- [サンプル集](examples/)
- [テスト戦略](docs/TEST_STRATEGY.md)

## 🚀 インストール

### バイナリ配布（推奨）

[Releases](https://github.com/ayutaz/Grimoire/releases)から、お使いのプラットフォーム用のバイナリをダウンロードしてください。

### ソースからのインストール

```bash
# uvを使用（推奨）
pip install uv
uv sync

# または従来のpip
pip install -e .
```

## 🎨 使い方

### 1. 魔法陣を描く

紙に手描き、またはデジタルツールで魔法陣を作成します。必ず外周円で囲んでください。

### 2. 画像をコンパイル・実行

```bash
# 直接実行
grimoire run magic_circle.png

# Pythonコードに変換
grimoire compile magic_circle.png -o output.py

# デバッグモード
grimoire debug magic_circle.png
```

## 📝 プログラム例

### Hello World (シンプルな出力)

```
      ╭─────────╮
    ╱             ╲
   │       ◎       │   <- メインエントリ
   │       |       │
   │       ☆       │   <- 出力
    ╲             ╱
      ╰─────────╯
```

### 加算 (1 + 2)

```
      ╭─────────────╮
    ╱                 ╲
   │         ◎         │
   │      ╱  |  ╲      │
   │    □    □    □    │  <- □(•) + □(••) 
   │    •    ⟐   ••    │  <- 1 + 2
   │         |         │
   │         ☆         │  <- 出力: 3
    ╲                 ╱
      ╰─────────────╯
```

### ループ (3回繰り返し)

```
      ╭────────────────╮
    ╱                    ╲
   │          ◎          │
   │          |          │
   │      □(•••)         │  <- カウンタ: 3
   │          |          │
   │      ╱───⬟───╲      │  <- ループ
   │     │    ☆    │     │  <- ループ内で出力
   │      ╲───────╱      │
    ╲                    ╱
      ╰────────────────╯
```

## 🧪 開発

### テストの実行

```bash
# 全テストを実行
uv run pytest

# カバレッジ付き
uv run pytest --cov=grimoire

# 特定のテストのみ
uv run pytest tests/unit/
```

### コードフォーマット

```bash
uv run ruff format .
uv run ruff check .
```

### ビルド

```bash
# スタンドアロン実行ファイルの作成
uv run pyinstaller grimoire.spec
```

## 🤝 貢献

プルリクエストを歓迎します！以下のガイドラインに従ってください：

1. テストファースト（TDD）で開発
2. すべてのテストがパスすることを確認
3. カバレッジ80%以上を維持
4. コミットメッセージは日本語可

## 📄 ライセンス

このプロジェクトはMITライセンスのもとで公開されています。

## 🏰 哲学

Grimoireは、プログラミングを視覚的で直感的なものにすることを目指しています。文字という抽象的な記号体系から離れ、より原始的で普遍的な図形言語によって、プログラミングの本質を探求します。

すべてのプログラムは魔法陣です。そして、すべての魔法陣は意図と構造を持った芸術作品です。